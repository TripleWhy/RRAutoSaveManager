image: mcr.microsoft.com/dotnet/core/sdk:3.1

binary:
  stage: build
  only:
    - tags
    - ci
  script:
    - pwd
    - pushd AutoSaveManager/AutoSaveManager
    - dotnet publish -c Release -r win-x64 --self-contained true -o ../../RRAutoSaveManager
    - ls -alR
    - pwd
    - popd
    - ls -alR
    - pwd
    - dotnet run --project AutoSaveManager/QtRuntimeDownloader ./RRAutoSaveManager
    - ls -alR
  artifacts:
    name: "RRAutoSaveManager${CI_COMMIT_TAG}"
    paths:
      - RRAutoSaveManager
